{% extends "base_generic.html" %}

{% block content %}
    <h4>{{ qr.title }}</h4>

    {% if qr.is_shop %}
        {# <p></p><strong>Puntos: {{ qr.scoring_value }}</strong></p> #}
        <br>
        <img src="/static/img/qr/comercios.jpg" alt="Comercio colaborador">
        <br>
        <div class="Description">
            <p>Los Comercios Colaboradores son el principal ingreso de la Festa Major. Sin ellos, las fiestas no serían posibles tal y como las conocemos.</p>
            <p>Por eso, cuando compras en los comercios del barrio, estás colaborando con la Festa Major.</p>
            <p style="text-align: left;">Además:
                - Son nuestros vecinos y vecinas
                - Ofrecen un trato personal y cercano
                - Sufren la competencia de las grandes superficies y el comercio electrónico
                - Un barrio sin comercios es un barrio muerto
            </p>
        </div>
    {% else %}
        {# <p></p><strong>Puntos: {{ qr.scoring_value }} - Pistas: {{ qr.hints }}</strong></p> #}

        {% if not qr.is_scanned %}
            <p class="Justify">{{ qr.hint|safe }}</p>
        {% endif %}

        {% if qr.is_scanned or qr.hints > 0 %}
            <br>
            <figure>
                <img src="/static/{{ qr.image }}" alt="{{ qr.title }}">
                <figcaption>{{ qr.image_footer }}</figcaption>
            </figure>
            <br>
        {% endif %}

        {% if qr.is_scanned %}
            <div class="Description">
                {{ qr.description|safe|urlize }}
            </div>
        {% else %}
            {% if qr.hints > 1 %}
                <a class="MapUrl" href="{{ qr.coordinates }}">Pulsa para abrir el mapa</a>
                <div class="GoogleMapsContainer">
                    <a href="{{ qr.coordinates }}">
                        <img src="/static/img/maps/{{ qr.id }}.jpg" alt="{{ qr.title }}">
                    </a>
                </div>
            {% endif %}
        {% endif %}
    {% endif %}

    <div>
        <div class="ButtonsContainer">
            {% if qr.is_shop is not True and qr.is_scanned is not True %}
                {% if qr.hints < 2 %}
                    <form action="{% url 'get-hint' qr.id %}">
                        <input class="Button" type="submit" value="Abrir pista*"/>
                    </form>
                {% else %}
                    <form action="{% url 'get-hint' qr.id %}">
                        <input class="Button" type="submit" value="Resolver QR*"/>
                    </form>
                {% endif %}
            {% endif %}

            <form action="{% url 'qrs' %}">
                <input class="Button" type="submit" value="Ver QRs"/>
            </form>
        </div>

        {% if qr.is_shop is not True and qr.is_scanned is not True %}
            <div class="Warning Center">
                {% if qr.hints < 2 %}
                    * Cada pista resta 1 punto al QR
                {% else %}
                    * Si resuelves el QR no se obtendrán puntos
                {% endif %}
            </div>
        {% endif %}
    </div>

{% endblock %}
